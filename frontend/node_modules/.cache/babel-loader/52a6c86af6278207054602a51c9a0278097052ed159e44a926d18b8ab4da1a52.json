{"ast":null,"code":"import{createContext,useState,useCallback}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";export const AuthContext=/*#__PURE__*/createContext({});export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState();const[ubsList,setUbsList]=useState([]);const[vacinasList,setVacinasList]=useState([]);const signin=async(email,password)=>{try{const response=await axios.post(\"http://localhost:8800/login\",{email:email,password:password});if(response.status===200){setUser({email});return;}return'Usu치rio ou senha incorretos';}catch(error){if(error.response&&error.response.status===404){return\"E-mail ou senha incorretos\";}else{return\"Ocorreu um erro inesperado\";}}};const signup=async(email,password)=>{try{const response=await axios.post(\"http://localhost:8800/register\",{email:email,password:password});if(response.status===201){setUser({email});return;}return'Erro ao criar conta, tente mais tarde';}catch(error){if(error.response&&error.response.status===400){return\"Conta j치 existente\";}else{return\"Ocorreu um erro inesperado\";}}};const signout=async()=>{setUser(null);};const getUbs=useCallback(async()=>{try{const response=await axios.get(\"http://localhost:8800/ubs\");setUbsList(response.data);}catch(error){if(error.response){return\"Erro ao buscar lista de UBSs\";}}},[]);const getUbsWithVacinas=useCallback(async()=>{try{const response=await axios.get(\"http://localhost:8800/ubsWithVacinas\");setVacinasList(response.data);}catch(error){if(error.response){return\"Erro ao buscar lista de UBSs com vacinas\";}}},[]);return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,signed:!!user,signin,signup,signout,getUbs,getUbsWithVacinas,ubsList,vacinasList},children:children});};","map":{"version":3,"names":["createContext","useState","useCallback","axios","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","ubsList","setUbsList","vacinasList","setVacinasList","signin","email","password","response","post","status","error","signup","signout","getUbs","get","data","getUbsWithVacinas","Provider","value","signed"],"sources":["C:/Users/djunior/Documents/projectoubsvac/frontend/src/contexts/auth.js"],"sourcesContent":["import { createContext, useState, useCallback } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport const AuthContext = createContext({});\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n    const [user, setUser] = useState();\r\n    const [ubsList, setUbsList] = useState([]);\r\n    const [vacinasList, setVacinasList] = useState([]); \r\n\r\n    const signin = async (email, password) => {\r\n        try {\r\n            const response = await axios.post(\"http://localhost:8800/login\", {\r\n                email: email,\r\n                password: password,\r\n            });\r\n\r\n            if (response.status === 200) {\r\n                setUser({ email });\r\n                return;\r\n            }\r\n\r\n            return 'Usu치rio ou senha incorretos'\r\n        } catch (error) {\r\n            if (error.response && error.response.status === 404) {\r\n                return \"E-mail ou senha incorretos\";\r\n            } else {\r\n                return \"Ocorreu um erro inesperado\";\r\n            }\r\n        }\r\n    };\r\n\r\n    const signup = async (email, password) => {\r\n        try {\r\n            const response = await axios.post(\"http://localhost:8800/register\", {\r\n                email: email,\r\n                password: password,\r\n            });\r\n\r\n            if (response.status === 201) {\r\n                setUser({ email });\r\n                return;\r\n            }\r\n\r\n            return 'Erro ao criar conta, tente mais tarde'\r\n        } catch (error) {\r\n            if (error.response && error.response.status === 400) {\r\n                return \"Conta j치 existente\";\r\n            } else {\r\n                return \"Ocorreu um erro inesperado\";\r\n            }\r\n        }\r\n    };\r\n\r\n    const signout = async () => {\r\n        setUser(null);\r\n    }\r\n\r\n    const getUbs = useCallback(async () => {\r\n        try {\r\n            const response = await axios.get(\"http://localhost:8800/ubs\");\r\n            setUbsList(response.data);\r\n        } catch (error) {\r\n            if (error.response) {\r\n                return \"Erro ao buscar lista de UBSs\";\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    const getUbsWithVacinas = useCallback(async () => {\r\n        try {\r\n            const response = await axios.get(\"http://localhost:8800/ubsWithVacinas\");\r\n            setVacinasList(response.data);\r\n        } catch (error) {\r\n            if (error.response) {\r\n                return \"Erro ao buscar lista de UBSs com vacinas\"\r\n            }\r\n        }\r\n    }, []);\r\n\r\n    return (\r\n        <AuthContext.Provider\r\n        value={{ user, signed: !!user, signin, signup, signout, getUbs, getUbsWithVacinas, ubsList, vacinasList }}\r\n        >\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}